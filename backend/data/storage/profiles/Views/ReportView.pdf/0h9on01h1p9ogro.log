{"type":"operationStart","subtype":"render","name":"ReportView.pdf","previousOperationId":null,"profileId":"rpdJzYty7O2wIKFH","timestamp":1645807942993,"id":"7urjqijm1n7r71e","operationId":"yrk3b5hww40e0f8"}
{"type":"log","timestamp":1645807942994,"level":"info","message":"Starting rendering request 8 (user: null)","meta":{"rootId":"0h9on01h1p9ogro","id":"0h9on01h1p9ogro"},"id":"go55eca2h36kpmb","operationId":"fs1nzc384i1y739","previousOperationId":"yrk3b5hww40e0f8"}
{"type":"log","timestamp":1645807942994,"level":"info","message":"Rendering template { name: ReportView.pdf, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"0h9on01h1p9ogro","id":"0h9on01h1p9ogro"},"id":"29x5yrlc7iztl7t","operationId":"ojlp0qo20674v3u","previousOperationId":"yrk3b5hww40e0f8"}
{"type":"log","timestamp":1645807942996,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"0h9on01h1p9ogro","id":"0h9on01h1p9ogro"},"id":"h7lci14enxqhn4u","operationId":"6evpfofl5zh2ywf","previousOperationId":"yrk3b5hww40e0f8"}
{"type":"log","timestamp":1645807942998,"level":"debug","message":"Executing script view-script (beforeRender)","meta":{"rootId":"0h9on01h1p9ogro","id":"0h9on01h1p9ogro"},"id":"vuwgo660yvsvtcw","operationId":"2lttih8az03hg3v","previousOperationId":"yrk3b5hww40e0f8"}
{"type":"log","timestamp":1645807943019,"level":"warn","message":"Error when processing render request 8 Error when evaluating custom script /Views/view-script\ndocument is not defined\n\n(sandbox.js line 26:21)\n\n  24 | }\n  25 |\n> 26 | var densityCanvas = document.getElementById(\"densityChart\");\n     |                     ^\n  27 |\n  28 | Chart.defaults.global.defaultFontFamily = \"Lato\";\n  29 | Chart.defaults.global.defaultFontSize = 18;\n\n(sandbox.js line 43:43)\n\n  41 |   }\n  42 | });\n> 43 |\n     | ^\n\n ReferenceError: document is not defined\n    at sandbox.js:26:21\n    at sandbox.js:43:43\n    at Script.runInContext (node:vm:139:12)\n    at VM.run (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\vm2\\lib\\main.js:933:53)\n    at run (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\safeSandbox.js:194:33)\n    at WorkerReporter._runInSandbox (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:140:12)\n    at WorkerReporter.runInSandbox (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:151:17)\n    at async executeScript (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\executeScript.js:123:12)\n    at async Scripts._runScript (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:140:30)\n    at async Scripts.handleBeforeRender (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:64:7)","meta":{"rootId":"0h9on01h1p9ogro","id":"0h9on01h1p9ogro"},"id":"w6x70mow211f56b","operationId":"dilnncfssovxcof","previousOperationId":"yrk3b5hww40e0f8"}
{"type":"log","timestamp":1645807943019,"level":"warn","message":"Rendering request 8 finished with error in 26 ms","meta":{"rootId":"0h9on01h1p9ogro","id":"0h9on01h1p9ogro"},"id":"cgme2qnpc2rx6vt","operationId":"lgdx1uiwa50id0k","previousOperationId":"yrk3b5hww40e0f8"}
{"type":"error","timestamp":1645807943030,"statusCode":400,"weak":true,"lineNumber":26,"entity":{"shortid":"TSCs-z5","name":"view-script","content":"var mysql = require('mysql');\r\n\r\nvar con = mysql.createConnection({\r\n    host: \"localhost\",\r\n    user: \"root\",\r\n    password: \"\",\r\n    database: \"db_galdar_3d\",\r\n    port: \"3306\",\r\n});\r\n\r\n\r\n\r\nfunction beforeRender(request, response, done) {\r\n    con.connect(function(err) {\r\n        if (err) throw err;\r\n        con.query('select * from views', function(err, result, fields) {\r\n            if (err) throw err;\r\n            request.data = {\r\n                view: result\r\n            };\r\n            done();\r\n        });\r\n    });\r\n}\r\n\r\nvar densityCanvas = document.getElementById(\"densityChart\");\r\n\r\nChart.defaults.global.defaultFontFamily = \"Lato\";\r\nChart.defaults.global.defaultFontSize = 18;\r\n\r\nvar densityData = {\r\n  label: 'Density of Planets (kg/m3)',\r\n  data: [5427, 5243, 5514, 3933, 1326, 687, 1271, 1638]\r\n};\r\n\r\nvar barChart = new Chart(densityCanvas, {\r\n  type: 'bar',\r\n  data: {\r\n    labels: [\"Mercury\", \"Venus\", \"Earth\", \"Mars\", \"Jupiter\", \"Saturn\", \"Uranus\", \"Neptune\"],\r\n    datasets: [densityData]\r\n  }\r\n});\r\n"},"property":"content","logged":true,"previousOperationId":"yrk3b5hww40e0f8","id":"o2owg8a4klrva3v","stack":"ReferenceError: document is not defined\n    at sandbox.js:26:21\n    at sandbox.js:43:43\n    at Script.runInContext (node:vm:139:12)\n    at VM.run (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\vm2\\lib\\main.js:933:53)\n    at run (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\safeSandbox.js:194:33)\n    at WorkerReporter._runInSandbox (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:140:12)\n    at WorkerReporter.runInSandbox (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:151:17)\n    at async executeScript (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\executeScript.js:123:12)\n    at async Scripts._runScript (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:140:30)\n    at async Scripts.handleBeforeRender (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:64:7)","message":"Error when evaluating custom script /Views/view-script\ndocument is not defined\n\n(sandbox.js line 26:21)\n\n  24 | }\n  25 |\n> 26 | var densityCanvas = document.getElementById(\"densityChart\");\n     |                     ^\n  27 |\n  28 | Chart.defaults.global.defaultFontFamily = \"Lato\";\n  29 | Chart.defaults.global.defaultFontSize = 18;\n\n(sandbox.js line 43:43)\n\n  41 |   }\n  42 | });\n> 43 |\n     | ^\n\n"}
