{"type":"operationStart","subtype":"render","name":"ReportView.pdf","previousOperationId":null,"profileId":"L9TMf5ryQ3COC2Pp","timestamp":1645807789969,"id":"qsw6igy0ajo0cdu","operationId":"5gbt8mwryv59ymu"}
{"type":"log","timestamp":1645807789969,"level":"info","message":"Starting rendering request 6 (user: null)","meta":{"rootId":"p87j4cd24dsgbgy","id":"p87j4cd24dsgbgy"},"id":"t78wskma2y5rn42","operationId":"c5ypjluhhiklo6i","previousOperationId":"5gbt8mwryv59ymu"}
{"type":"log","timestamp":1645807789969,"level":"info","message":"Rendering template { name: ReportView.pdf, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"p87j4cd24dsgbgy","id":"p87j4cd24dsgbgy"},"id":"3mgsn4rp60s6tfv","operationId":"zwyqeh2xhwr789n","previousOperationId":"5gbt8mwryv59ymu"}
{"type":"log","timestamp":1645807789970,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"p87j4cd24dsgbgy","id":"p87j4cd24dsgbgy"},"id":"2bbauyswkvei3f9","operationId":"ykq0hrti0crkd0h","previousOperationId":"5gbt8mwryv59ymu"}
{"type":"log","timestamp":1645807789972,"level":"debug","message":"Executing script view-script (beforeRender)","meta":{"rootId":"p87j4cd24dsgbgy","id":"p87j4cd24dsgbgy"},"id":"6z1juny2a6y60dw","operationId":"gp94n5fua286lkf","previousOperationId":"5gbt8mwryv59ymu"}
{"type":"log","timestamp":1645807789992,"level":"warn","message":"Error when processing render request 6 Error when evaluating custom script /Views/view-script\ndocument is not defined\n\n(sandbox.js line 11:19)\n\n   9 | });\n  10 |\n> 11 | var speedCanvas = document.getElementById(\"speedChart\");\n     |                   ^\n  12 |\n  13 | Chart.defaults.global.defaultFontFamily = \"Lato\";\n  14 | Chart.defaults.global.defaultFontSize = 18;\n\n(sandbox.js line 53:43)\n\n  51 |     });\n  52 | }\n> 53 |\n     | ^\n\n ReferenceError: document is not defined\n    at sandbox.js:11:19\n    at sandbox.js:53:43\n    at Script.runInContext (node:vm:139:12)\n    at VM.run (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\vm2\\lib\\main.js:933:53)\n    at run (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\safeSandbox.js:194:33)\n    at WorkerReporter._runInSandbox (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:140:12)\n    at WorkerReporter.runInSandbox (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:151:17)\n    at async executeScript (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\executeScript.js:123:12)\n    at async Scripts._runScript (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:140:30)\n    at async Scripts.handleBeforeRender (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:64:7)","meta":{"rootId":"p87j4cd24dsgbgy","id":"p87j4cd24dsgbgy"},"id":"065cetvpha6up5d","operationId":"16ghnuqw6saa27p","previousOperationId":"5gbt8mwryv59ymu"}
{"type":"log","timestamp":1645807789993,"level":"warn","message":"Rendering request 6 finished with error in 24 ms","meta":{"rootId":"p87j4cd24dsgbgy","id":"p87j4cd24dsgbgy"},"id":"9xa07j8xxteteqg","operationId":"sik5ha14lhl99en","previousOperationId":"5gbt8mwryv59ymu"}
{"type":"error","timestamp":1645807790002,"statusCode":400,"weak":true,"lineNumber":11,"entity":{"shortid":"TSCs-z5","name":"view-script","content":"var mysql = require('mysql');\r\n\r\nvar con = mysql.createConnection({\r\n    host: \"localhost\",\r\n    user: \"root\",\r\n    password: \"\",\r\n    database: \"db_galdar_3d\",\r\n    port: \"3306\",\r\n});\r\n\r\nvar speedCanvas = document.getElementById(\"speedChart\");\r\n\r\nChart.defaults.global.defaultFontFamily = \"Lato\";\r\nChart.defaults.global.defaultFontSize = 18;\r\n\r\nvar speedData = {\r\n  labels: [\"0s\", \"10s\", \"20s\", \"30s\", \"40s\", \"50s\", \"60s\"],\r\n  datasets: [{\r\n    label: \"Car Speed (mph)\",\r\n    data: [0, 59, 75, 20, 20, 55, 40],\r\n  }]\r\n};\r\n\r\nvar chartOptions = {\r\n  legend: {\r\n    display: true,\r\n    position: 'top',\r\n    labels: {\r\n      boxWidth: 80,\r\n      fontColor: 'black'\r\n    }\r\n  }\r\n};\r\n\r\nvar lineChart = new Chart(speedCanvas, {\r\n  type: 'line',\r\n  data: speedData,\r\n  options: chartOptions\r\n});\r\n\r\nfunction beforeRender(request, response, done) {\r\n    con.connect(function(err) {\r\n        if (err) throw err;\r\n        con.query('select * from views', function(err, result, fields) {\r\n            if (err) throw err;\r\n            request.data = {\r\n                view: result\r\n            };\r\n            done();\r\n        });\r\n    });\r\n}\r\n"},"property":"content","logged":true,"previousOperationId":"5gbt8mwryv59ymu","id":"bdo78m0nroryfdm","stack":"ReferenceError: document is not defined\n    at sandbox.js:11:19\n    at sandbox.js:53:43\n    at Script.runInContext (node:vm:139:12)\n    at VM.run (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\vm2\\lib\\main.js:933:53)\n    at run (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\safeSandbox.js:194:33)\n    at WorkerReporter._runInSandbox (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:140:12)\n    at WorkerReporter.runInSandbox (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:151:17)\n    at async executeScript (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\executeScript.js:123:12)\n    at async Scripts._runScript (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:140:30)\n    at async Scripts.handleBeforeRender (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:64:7)","message":"Error when evaluating custom script /Views/view-script\ndocument is not defined\n\n(sandbox.js line 11:19)\n\n   9 | });\n  10 |\n> 11 | var speedCanvas = document.getElementById(\"speedChart\");\n     |                   ^\n  12 |\n  13 | Chart.defaults.global.defaultFontFamily = \"Lato\";\n  14 | Chart.defaults.global.defaultFontSize = 18;\n\n(sandbox.js line 53:43)\n\n  51 |     });\n  52 | }\n> 53 |\n     | ^\n\n"}
