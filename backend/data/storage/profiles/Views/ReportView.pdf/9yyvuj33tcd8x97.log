{"type":"operationStart","subtype":"render","name":"ReportView.pdf","previousOperationId":null,"profileId":"O75441atN8dOLXTU","timestamp":1645807875591,"id":"3dvorwv9s6whhm4","operationId":"6vl1k7y0k8e41yd"}
{"type":"log","timestamp":1645807875591,"level":"info","message":"Starting rendering request 7 (user: null)","meta":{"rootId":"9yyvuj33tcd8x97","id":"9yyvuj33tcd8x97"},"id":"jv2vrd4vgclhidu","operationId":"3r1ympn9u5tpe1v","previousOperationId":"6vl1k7y0k8e41yd"}
{"type":"log","timestamp":1645807875591,"level":"info","message":"Rendering template { name: ReportView.pdf, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"9yyvuj33tcd8x97","id":"9yyvuj33tcd8x97"},"id":"pwcidei6q3ebq3f","operationId":"yg70579p1qfnal9","previousOperationId":"6vl1k7y0k8e41yd"}
{"type":"log","timestamp":1645807875592,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"9yyvuj33tcd8x97","id":"9yyvuj33tcd8x97"},"id":"6shyx7rzcxovgk3","operationId":"zag3d8edjakclr5","previousOperationId":"6vl1k7y0k8e41yd"}
{"type":"log","timestamp":1645807875594,"level":"debug","message":"Executing script view-script (beforeRender)","meta":{"rootId":"9yyvuj33tcd8x97","id":"9yyvuj33tcd8x97"},"id":"5oeo8qpwc737pte","operationId":"9ulfj1sknfr6lq4","previousOperationId":"6vl1k7y0k8e41yd"}
{"type":"log","timestamp":1645807875611,"level":"warn","message":"Error when processing render request 7 Error when evaluating custom script /Views/view-script\nJSDOM is not defined\n\n(sandbox.js line 11:23)\n\n   9 | });\n  10 |\n> 11 | GLOBAL.document = new JSDOM(html).window.document;\n     |                       ^\n  12 |\n  13 | var speedCanvas = document.getElementById(\"speedChart\");\n  14 |\n\n(sandbox.js line 55:43)\n\n  53 |     });\n  54 | }\n> 55 |\n     | ^\n\n ReferenceError: JSDOM is not defined\n    at sandbox.js:11:23\n    at sandbox.js:55:43\n    at Script.runInContext (node:vm:139:12)\n    at VM.run (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\vm2\\lib\\main.js:933:53)\n    at run (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\safeSandbox.js:194:33)\n    at WorkerReporter._runInSandbox (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:140:12)\n    at WorkerReporter.runInSandbox (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:151:17)\n    at async executeScript (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\executeScript.js:123:12)\n    at async Scripts._runScript (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:140:30)\n    at async Scripts.handleBeforeRender (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:64:7)","meta":{"rootId":"9yyvuj33tcd8x97","id":"9yyvuj33tcd8x97"},"id":"vxf4rrbwr98t3im","operationId":"l8ovv3rde4h4isa","previousOperationId":"6vl1k7y0k8e41yd"}
{"type":"log","timestamp":1645807875611,"level":"warn","message":"Rendering request 7 finished with error in 20 ms","meta":{"rootId":"9yyvuj33tcd8x97","id":"9yyvuj33tcd8x97"},"id":"hxmfs9ptyty0ib0","operationId":"vxf298wq9fg5dey","previousOperationId":"6vl1k7y0k8e41yd"}
{"type":"error","timestamp":1645807875621,"statusCode":400,"weak":true,"lineNumber":11,"entity":{"shortid":"TSCs-z5","name":"view-script","content":"var mysql = require('mysql');\r\n\r\nvar con = mysql.createConnection({\r\n    host: \"localhost\",\r\n    user: \"root\",\r\n    password: \"\",\r\n    database: \"db_galdar_3d\",\r\n    port: \"3306\",\r\n});\r\n\r\nGLOBAL.document = new JSDOM(html).window.document;\r\n\r\nvar speedCanvas = document.getElementById(\"speedChart\");\r\n\r\nChart.defaults.global.defaultFontFamily = \"Lato\";\r\nChart.defaults.global.defaultFontSize = 18;\r\n\r\nvar speedData = {\r\n  labels: [\"0s\", \"10s\", \"20s\", \"30s\", \"40s\", \"50s\", \"60s\"],\r\n  datasets: [{\r\n    label: \"Car Speed (mph)\",\r\n    data: [0, 59, 75, 20, 20, 55, 40],\r\n  }]\r\n};\r\n\r\nvar chartOptions = {\r\n  legend: {\r\n    display: true,\r\n    position: 'top',\r\n    labels: {\r\n      boxWidth: 80,\r\n      fontColor: 'black'\r\n    }\r\n  }\r\n};\r\n\r\nvar lineChart = new Chart(speedCanvas, {\r\n  type: 'line',\r\n  data: speedData,\r\n  options: chartOptions\r\n});\r\n\r\nfunction beforeRender(request, response, done) {\r\n    con.connect(function(err) {\r\n        if (err) throw err;\r\n        con.query('select * from views', function(err, result, fields) {\r\n            if (err) throw err;\r\n            request.data = {\r\n                view: result\r\n            };\r\n            done();\r\n        });\r\n    });\r\n}\r\n"},"property":"content","logged":true,"previousOperationId":"6vl1k7y0k8e41yd","id":"q029mvchooenspq","stack":"ReferenceError: JSDOM is not defined\n    at sandbox.js:11:23\n    at sandbox.js:55:43\n    at Script.runInContext (node:vm:139:12)\n    at VM.run (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\vm2\\lib\\main.js:933:53)\n    at run (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\safeSandbox.js:194:33)\n    at WorkerReporter._runInSandbox (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:140:12)\n    at WorkerReporter.runInSandbox (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:151:17)\n    at async executeScript (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\executeScript.js:123:12)\n    at async Scripts._runScript (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:140:30)\n    at async Scripts.handleBeforeRender (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:64:7)","message":"Error when evaluating custom script /Views/view-script\nJSDOM is not defined\n\n(sandbox.js line 11:23)\n\n   9 | });\n  10 |\n> 11 | GLOBAL.document = new JSDOM(html).window.document;\n     |                       ^\n  12 |\n  13 | var speedCanvas = document.getElementById(\"speedChart\");\n  14 |\n\n(sandbox.js line 55:43)\n\n  53 |     });\n  54 | }\n> 55 |\n     | ^\n\n"}
