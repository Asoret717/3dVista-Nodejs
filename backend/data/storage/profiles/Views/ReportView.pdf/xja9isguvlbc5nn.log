{"type":"operationStart","subtype":"render","name":"ReportView.pdf","previousOperationId":null,"profileId":"9Lcjz6oZwRPmFBvF","timestamp":1645807742141,"id":"j8rz9cqj24gtzan","operationId":"zrf6mnqe7dvmihl"}
{"type":"log","timestamp":1645807742141,"level":"info","message":"Starting rendering request 5 (user: null)","meta":{"rootId":"xja9isguvlbc5nn","id":"xja9isguvlbc5nn"},"id":"cvopzwod0cb3za9","operationId":"cdy260w50xkva5f","previousOperationId":"zrf6mnqe7dvmihl"}
{"type":"log","timestamp":1645807742141,"level":"info","message":"Rendering template { name: ReportView.pdf, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"xja9isguvlbc5nn","id":"xja9isguvlbc5nn"},"id":"5h5ozgmybe6jjxj","operationId":"bod5w87r0lqykii","previousOperationId":"zrf6mnqe7dvmihl"}
{"type":"log","timestamp":1645807742142,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"xja9isguvlbc5nn","id":"xja9isguvlbc5nn"},"id":"k5d9obit9mpoztz","operationId":"s6c1imgo29ubj49","previousOperationId":"zrf6mnqe7dvmihl"}
{"type":"log","timestamp":1645807742144,"level":"debug","message":"Executing script view-script (beforeRender)","meta":{"rootId":"xja9isguvlbc5nn","id":"xja9isguvlbc5nn"},"id":"zfq50obc0b7ggvu","operationId":"s1lvvig81avd7y5","previousOperationId":"zrf6mnqe7dvmihl"}
{"type":"log","timestamp":1645807742166,"level":"warn","message":"Error when processing render request 5 Error when evaluating custom script /Views/view-script\ndocument is not defined\n\n(sandbox.js line 24:19)\n\n  22 | }\n  23 |\n> 24 | var speedCanvas = document.getElementById(\"speedChart\");\n     |                   ^\n  25 |\n  26 | Chart.defaults.global.defaultFontFamily = \"Lato\";\n  27 | Chart.defaults.global.defaultFontSize = 18;\n\n(sandbox.js line 52:46)\n\n  50 |   data: speedData,\n  51 |   options: chartOptions\n> 52 | });\n     |    ^\n\n ReferenceError: document is not defined\n    at sandbox.js:24:19\n    at sandbox.js:52:46\n    at Script.runInContext (node:vm:139:12)\n    at VM.run (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\vm2\\lib\\main.js:933:53)\n    at run (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\safeSandbox.js:194:33)\n    at WorkerReporter._runInSandbox (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:140:12)\n    at WorkerReporter.runInSandbox (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:151:17)\n    at async executeScript (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\executeScript.js:123:12)\n    at async Scripts._runScript (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:140:30)\n    at async Scripts.handleBeforeRender (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:64:7)","meta":{"rootId":"xja9isguvlbc5nn","id":"xja9isguvlbc5nn"},"id":"g0elp3wz8zn5p7y","operationId":"8jdju25r62imqpj","previousOperationId":"zrf6mnqe7dvmihl"}
{"type":"log","timestamp":1645807742166,"level":"warn","message":"Rendering request 5 finished with error in 25 ms","meta":{"rootId":"xja9isguvlbc5nn","id":"xja9isguvlbc5nn"},"id":"gavet78lzd0jbo4","operationId":"v413l31lfsvs96q","previousOperationId":"zrf6mnqe7dvmihl"}
{"type":"error","timestamp":1645807742176,"statusCode":400,"weak":true,"lineNumber":24,"entity":{"shortid":"TSCs-z5","name":"view-script","content":"var mysql = require('mysql');\r\n\r\nvar con = mysql.createConnection({\r\n    host: \"localhost\",\r\n    user: \"root\",\r\n    password: \"\",\r\n    database: \"db_galdar_3d\",\r\n    port: \"3306\",\r\n});\r\n\r\nfunction beforeRender(request, response, done) {\r\n    con.connect(function(err) {\r\n        if (err) throw err;\r\n        con.query('select * from views', function(err, result, fields) {\r\n            if (err) throw err;\r\n            request.data = {\r\n                view: result\r\n            };\r\n            done();\r\n        });\r\n    });\r\n}\r\n\r\nvar speedCanvas = document.getElementById(\"speedChart\");\r\n\r\nChart.defaults.global.defaultFontFamily = \"Lato\";\r\nChart.defaults.global.defaultFontSize = 18;\r\n\r\nvar speedData = {\r\n  labels: [\"0s\", \"10s\", \"20s\", \"30s\", \"40s\", \"50s\", \"60s\"],\r\n  datasets: [{\r\n    label: \"Car Speed (mph)\",\r\n    data: [0, 59, 75, 20, 20, 55, 40],\r\n  }]\r\n};\r\n\r\nvar chartOptions = {\r\n  legend: {\r\n    display: true,\r\n    position: 'top',\r\n    labels: {\r\n      boxWidth: 80,\r\n      fontColor: 'black'\r\n    }\r\n  }\r\n};\r\n\r\nvar lineChart = new Chart(speedCanvas, {\r\n  type: 'line',\r\n  data: speedData,\r\n  options: chartOptions\r\n});"},"property":"content","logged":true,"previousOperationId":"zrf6mnqe7dvmihl","id":"1ouwbuagwngqpbc","stack":"ReferenceError: document is not defined\n    at sandbox.js:24:19\n    at sandbox.js:52:46\n    at Script.runInContext (node:vm:139:12)\n    at VM.run (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\vm2\\lib\\main.js:933:53)\n    at run (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\safeSandbox.js:194:33)\n    at WorkerReporter._runInSandbox (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:140:12)\n    at WorkerReporter.runInSandbox (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:151:17)\n    at async executeScript (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\executeScript.js:123:12)\n    at async Scripts._runScript (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:140:30)\n    at async Scripts.handleBeforeRender (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:64:7)","message":"Error when evaluating custom script /Views/view-script\ndocument is not defined\n\n(sandbox.js line 24:19)\n\n  22 | }\n  23 |\n> 24 | var speedCanvas = document.getElementById(\"speedChart\");\n     |                   ^\n  25 |\n  26 | Chart.defaults.global.defaultFontFamily = \"Lato\";\n  27 | Chart.defaults.global.defaultFontSize = 18;\n\n(sandbox.js line 52:46)\n\n  50 |   data: speedData,\n  51 |   options: chartOptions\n> 52 | });\n     |    ^\n\n"}
