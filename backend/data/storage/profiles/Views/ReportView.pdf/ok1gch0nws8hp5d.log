{"type":"operationStart","subtype":"render","name":"ReportView.pdf","previousOperationId":null,"profileId":"2iFp8O1d99untLrG","timestamp":1645809266581,"id":"7zvu4scjo8bbgva","operationId":"0lwuv15tgu1obp3"}
{"type":"log","timestamp":1645809266581,"level":"info","message":"Starting rendering request 12 (user: null)","meta":{"rootId":"ok1gch0nws8hp5d","id":"ok1gch0nws8hp5d"},"id":"vy2n8u374mhz5cz","operationId":"egulpxgd7zhaczr","previousOperationId":"0lwuv15tgu1obp3"}
{"type":"log","timestamp":1645809266581,"level":"info","message":"Rendering template { name: ReportView.pdf, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"ok1gch0nws8hp5d","id":"ok1gch0nws8hp5d"},"id":"yryjedue0zwkqs3","operationId":"fequapwlv2qlfr7","previousOperationId":"0lwuv15tgu1obp3"}
{"type":"log","timestamp":1645809266582,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"ok1gch0nws8hp5d","id":"ok1gch0nws8hp5d"},"id":"oehk3cidw7nlu21","operationId":"mcing7sj9ezxeh8","previousOperationId":"0lwuv15tgu1obp3"}
{"type":"log","timestamp":1645809266590,"level":"debug","message":"Executing script view-script (beforeRender)","meta":{"rootId":"ok1gch0nws8hp5d","id":"ok1gch0nws8hp5d"},"id":"1r1pyrxcrbipvsh","operationId":"zgrtil8x2dviq9i","previousOperationId":"0lwuv15tgu1obp3"}
{"type":"log","timestamp":1645809266607,"level":"warn","message":"Error when processing render request 12 Error when evaluating custom script /Views/view-script\n$ is not defined\n\n(sandbox.js line 33:5)\n\n  31 |     }\n  32 |\n> 33 |     $.plot(\"#placeholder\", [d1]); \n     |     ^\n  34 |\n  35 |\n  36 | /*var densityCanvas = document.getElementById(\"densityChart\");\n\n(sandbox.js line 53:43)\n\n  51 |   }\n  52 | });*/\n> 53 |\n     | ^\n\n ReferenceError: $ is not defined\n    at sandbox.js:33:5\n    at sandbox.js:53:43\n    at Script.runInContext (node:vm:139:12)\n    at VM.run (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\vm2\\lib\\main.js:933:53)\n    at run (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\safeSandbox.js:194:33)\n    at WorkerReporter._runInSandbox (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:140:12)\n    at WorkerReporter.runInSandbox (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:151:17)\n    at async executeScript (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\executeScript.js:123:12)\n    at async Scripts._runScript (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:140:30)\n    at async Scripts.handleBeforeRender (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:64:7)","meta":{"rootId":"ok1gch0nws8hp5d","id":"ok1gch0nws8hp5d"},"id":"b24k1jn5nyoe0zg","operationId":"p8mxzjlpw6jpkuf","previousOperationId":"0lwuv15tgu1obp3"}
{"type":"log","timestamp":1645809266607,"level":"warn","message":"Rendering request 12 finished with error in 26 ms","meta":{"rootId":"ok1gch0nws8hp5d","id":"ok1gch0nws8hp5d"},"id":"fzf90u6srwykbau","operationId":"wojb3pofr3x7tv9","previousOperationId":"0lwuv15tgu1obp3"}
{"type":"error","timestamp":1645809266614,"statusCode":400,"weak":true,"lineNumber":33,"entity":{"shortid":"TSCs-z5","name":"view-script","content":"var mysql = require('mysql');\r\n\r\nvar con = mysql.createConnection({\r\n    host: \"localhost\",\r\n    user: \"root\",\r\n    password: \"\",\r\n    database: \"db_galdar_3d\",\r\n    port: \"3306\",\r\n});\r\n\r\n\r\n\r\nfunction beforeRender(request, response, done) {\r\n    con.connect(function(err) {\r\n        if (err) throw err;\r\n        con.query('select * from views', function(err, result, fields) {\r\n            if (err) throw err;\r\n            request.data = {\r\n                view: result\r\n            };\r\n            done();\r\n        });\r\n    });\r\n}\r\n\r\n \r\n\r\n    var d1 = [];\r\n    for (var i = 0; i < 14; i += 0.5) {\r\n        d1.push([i, Math.sin(i)]);\r\n    }\r\n\r\n    $.plot(\"#placeholder\", [d1]); \r\n\r\n\r\n/*var densityCanvas = document.getElementById(\"densityChart\");\r\n\r\nChart.defaults.global.defaultFontFamily = \"Lato\";\r\nChart.defaults.global.defaultFontSize = 18;\r\n\r\nvar densityData = {\r\n  label: 'Density of Planets (kg/m3)',\r\n  data: [5427, 5243, 5514, 3933, 1326, 687, 1271, 1638]\r\n};\r\n\r\nvar barChart = new Chart(densityCanvas, {\r\n  type: 'bar',\r\n  data: {\r\n    labels: [\"Mercury\", \"Venus\", \"Earth\", \"Mars\", \"Jupiter\", \"Saturn\", \"Uranus\", \"Neptune\"],\r\n    datasets: [densityData]\r\n  }\r\n});*/\r\n"},"property":"content","logged":true,"previousOperationId":"0lwuv15tgu1obp3","id":"rto61cypd05po8b","stack":"ReferenceError: $ is not defined\n    at sandbox.js:33:5\n    at sandbox.js:53:43\n    at Script.runInContext (node:vm:139:12)\n    at VM.run (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\vm2\\lib\\main.js:933:53)\n    at run (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\safeSandbox.js:194:33)\n    at WorkerReporter._runInSandbox (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:140:12)\n    at WorkerReporter.runInSandbox (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:151:17)\n    at async executeScript (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\executeScript.js:123:12)\n    at async Scripts._runScript (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:140:30)\n    at async Scripts.handleBeforeRender (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:64:7)","message":"Error when evaluating custom script /Views/view-script\n$ is not defined\n\n(sandbox.js line 33:5)\n\n  31 |     }\n  32 |\n> 33 |     $.plot(\"#placeholder\", [d1]); \n     |     ^\n  34 |\n  35 |\n  36 | /*var densityCanvas = document.getElementById(\"densityChart\");\n\n(sandbox.js line 53:43)\n\n  51 |   }\n  52 | });*/\n> 53 |\n     | ^\n\n"}
