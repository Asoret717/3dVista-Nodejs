{"type":"operationStart","subtype":"render","name":"ReportView.pdf","previousOperationId":null,"profileId":"Ca4e4pn1RGZU28Cq","timestamp":1645809225547,"id":"0r2v000ck7w0hwa","operationId":"95xbscuba5gbvis"}
{"type":"log","timestamp":1645809225547,"level":"info","message":"Starting rendering request 10 (user: null)","meta":{"rootId":"yz1jb7moj18vm6z","id":"yz1jb7moj18vm6z"},"id":"op7tre5u74qim1x","operationId":"208w9p2c9jgc4vh","previousOperationId":"95xbscuba5gbvis"}
{"type":"log","timestamp":1645809225547,"level":"info","message":"Rendering template { name: ReportView.pdf, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"yz1jb7moj18vm6z","id":"yz1jb7moj18vm6z"},"id":"7epsi70f42zpdga","operationId":"qgsz741q37fe3yz","previousOperationId":"95xbscuba5gbvis"}
{"type":"log","timestamp":1645809225548,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"yz1jb7moj18vm6z","id":"yz1jb7moj18vm6z"},"id":"mc4ph73gr0x6chg","operationId":"l5z30kek7pf6jxg","previousOperationId":"95xbscuba5gbvis"}
{"type":"log","timestamp":1645809225550,"level":"debug","message":"Executing script view-script (beforeRender)","meta":{"rootId":"yz1jb7moj18vm6z","id":"yz1jb7moj18vm6z"},"id":"br8wusmtjiik445","operationId":"us9x8ku6thizmby","previousOperationId":"95xbscuba5gbvis"}
{"type":"log","timestamp":1645809225568,"level":"warn","message":"Error when processing render request 10 Error when evaluating custom script /Views/view-script\n$ is not defined\n\n(sandbox.js line 26:1)\n\n  24 | }\n  25 |\n> 26 | $(function () {   \n     | ^\n  27 |\n  28 |     var d1 = [];\n  29 |     for (var i = 0; i < 14; i += 0.5) {\n\n(sandbox.js line 53:43)\n\n  51 |   }\n  52 | });*/\n> 53 |\n     | ^\n\n ReferenceError: $ is not defined\n    at sandbox.js:26:1\n    at sandbox.js:53:43\n    at Script.runInContext (node:vm:139:12)\n    at VM.run (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\vm2\\lib\\main.js:933:53)\n    at run (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\safeSandbox.js:194:33)\n    at WorkerReporter._runInSandbox (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:140:12)\n    at WorkerReporter.runInSandbox (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:151:17)\n    at async executeScript (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\executeScript.js:123:12)\n    at async Scripts._runScript (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:140:30)\n    at async Scripts.handleBeforeRender (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:64:7)","meta":{"rootId":"yz1jb7moj18vm6z","id":"yz1jb7moj18vm6z"},"id":"eo8ocmi6xhplrmr","operationId":"pyh4cn3ojvifwmq","previousOperationId":"95xbscuba5gbvis"}
{"type":"log","timestamp":1645809225568,"level":"warn","message":"Rendering request 10 finished with error in 21 ms","meta":{"rootId":"yz1jb7moj18vm6z","id":"yz1jb7moj18vm6z"},"id":"hiestoz1spr6mer","operationId":"ej55u83g4xads3x","previousOperationId":"95xbscuba5gbvis"}
{"type":"error","timestamp":1645809225576,"statusCode":400,"weak":true,"lineNumber":26,"entity":{"shortid":"TSCs-z5","name":"view-script","content":"var mysql = require('mysql');\r\n\r\nvar con = mysql.createConnection({\r\n    host: \"localhost\",\r\n    user: \"root\",\r\n    password: \"\",\r\n    database: \"db_galdar_3d\",\r\n    port: \"3306\",\r\n});\r\n\r\n\r\n\r\nfunction beforeRender(request, response, done) {\r\n    con.connect(function(err) {\r\n        if (err) throw err;\r\n        con.query('select * from views', function(err, result, fields) {\r\n            if (err) throw err;\r\n            request.data = {\r\n                view: result\r\n            };\r\n            done();\r\n        });\r\n    });\r\n}\r\n\r\n$(function () {   \r\n\r\n    var d1 = [];\r\n    for (var i = 0; i < 14; i += 0.5) {\r\n        d1.push([i, Math.sin(i)]);\r\n    }\r\n\r\n    $.plot(\"#placeholder\", [d1]); \r\n});\r\n\r\n/*var densityCanvas = document.getElementById(\"densityChart\");\r\n\r\nChart.defaults.global.defaultFontFamily = \"Lato\";\r\nChart.defaults.global.defaultFontSize = 18;\r\n\r\nvar densityData = {\r\n  label: 'Density of Planets (kg/m3)',\r\n  data: [5427, 5243, 5514, 3933, 1326, 687, 1271, 1638]\r\n};\r\n\r\nvar barChart = new Chart(densityCanvas, {\r\n  type: 'bar',\r\n  data: {\r\n    labels: [\"Mercury\", \"Venus\", \"Earth\", \"Mars\", \"Jupiter\", \"Saturn\", \"Uranus\", \"Neptune\"],\r\n    datasets: [densityData]\r\n  }\r\n});*/\r\n"},"property":"content","logged":true,"previousOperationId":"95xbscuba5gbvis","id":"43jxj1ggulyuxbo","stack":"ReferenceError: $ is not defined\n    at sandbox.js:26:1\n    at sandbox.js:53:43\n    at Script.runInContext (node:vm:139:12)\n    at VM.run (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\vm2\\lib\\main.js:933:53)\n    at run (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\safeSandbox.js:194:33)\n    at WorkerReporter._runInSandbox (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:140:12)\n    at WorkerReporter.runInSandbox (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:151:17)\n    at async executeScript (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\executeScript.js:123:12)\n    at async Scripts._runScript (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:140:30)\n    at async Scripts.handleBeforeRender (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:64:7)","message":"Error when evaluating custom script /Views/view-script\n$ is not defined\n\n(sandbox.js line 26:1)\n\n  24 | }\n  25 |\n> 26 | $(function () {   \n     | ^\n  27 |\n  28 |     var d1 = [];\n  29 |     for (var i = 0; i < 14; i += 0.5) {\n\n(sandbox.js line 53:43)\n\n  51 |   }\n  52 | });*/\n> 53 |\n     | ^\n\n"}
