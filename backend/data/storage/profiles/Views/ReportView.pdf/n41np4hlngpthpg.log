{"type":"operationStart","subtype":"render","name":"ReportView.pdf","previousOperationId":null,"profileId":"7OwLAbuCQvn4w2eo","timestamp":1645807943736,"id":"efaiy0fevfe2ebi","operationId":"zy05yvpzwbvhmtg"}
{"type":"log","timestamp":1645807943737,"level":"info","message":"Starting rendering request 9 (user: null)","meta":{"rootId":"n41np4hlngpthpg","id":"n41np4hlngpthpg"},"id":"kme70twtp7255q9","operationId":"as8ekyq6e9zjckl","previousOperationId":"zy05yvpzwbvhmtg"}
{"type":"log","timestamp":1645807943737,"level":"info","message":"Rendering template { name: ReportView.pdf, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"n41np4hlngpthpg","id":"n41np4hlngpthpg"},"id":"xqzga1e15sdbwdk","operationId":"bkc7tmzwjr6r3t7","previousOperationId":"zy05yvpzwbvhmtg"}
{"type":"log","timestamp":1645807943737,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"n41np4hlngpthpg","id":"n41np4hlngpthpg"},"id":"2ruwkvd16y3al4f","operationId":"e0qe5iejqpgqdml","previousOperationId":"zy05yvpzwbvhmtg"}
{"type":"log","timestamp":1645807943739,"level":"debug","message":"Executing script view-script (beforeRender)","meta":{"rootId":"n41np4hlngpthpg","id":"n41np4hlngpthpg"},"id":"ea8nfr3nmjubich","operationId":"qca8vz74bfy4x1i","previousOperationId":"zy05yvpzwbvhmtg"}
{"type":"log","timestamp":1645807943752,"level":"warn","message":"Error when processing render request 9 Error when evaluating custom script /Views/view-script\ndocument is not defined\n\n(sandbox.js line 26:21)\n\n  24 | }\n  25 |\n> 26 | var densityCanvas = document.getElementById(\"densityChart\");\n     |                     ^\n  27 |\n  28 | Chart.defaults.global.defaultFontFamily = \"Lato\";\n  29 | Chart.defaults.global.defaultFontSize = 18;\n\n(sandbox.js line 43:43)\n\n  41 |   }\n  42 | });\n> 43 |\n     | ^\n\n ReferenceError: document is not defined\n    at sandbox.js:26:21\n    at sandbox.js:43:43\n    at Script.runInContext (node:vm:139:12)\n    at VM.run (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\vm2\\lib\\main.js:933:53)\n    at run (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\safeSandbox.js:194:33)\n    at WorkerReporter._runInSandbox (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:140:12)\n    at WorkerReporter.runInSandbox (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:151:17)\n    at async executeScript (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\executeScript.js:123:12)\n    at async Scripts._runScript (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:140:30)\n    at async Scripts.handleBeforeRender (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:64:7)","meta":{"rootId":"n41np4hlngpthpg","id":"n41np4hlngpthpg"},"id":"n46nrcrsn4g60n3","operationId":"j58kgv7rcw15jo6","previousOperationId":"zy05yvpzwbvhmtg"}
{"type":"log","timestamp":1645807943752,"level":"warn","message":"Rendering request 9 finished with error in 15 ms","meta":{"rootId":"n41np4hlngpthpg","id":"n41np4hlngpthpg"},"id":"6sk3n38i6ch2t9c","operationId":"m88g7fnh4hujfag","previousOperationId":"zy05yvpzwbvhmtg"}
{"type":"error","timestamp":1645807943762,"statusCode":400,"weak":true,"lineNumber":26,"entity":{"shortid":"TSCs-z5","name":"view-script","content":"var mysql = require('mysql');\r\n\r\nvar con = mysql.createConnection({\r\n    host: \"localhost\",\r\n    user: \"root\",\r\n    password: \"\",\r\n    database: \"db_galdar_3d\",\r\n    port: \"3306\",\r\n});\r\n\r\n\r\n\r\nfunction beforeRender(request, response, done) {\r\n    con.connect(function(err) {\r\n        if (err) throw err;\r\n        con.query('select * from views', function(err, result, fields) {\r\n            if (err) throw err;\r\n            request.data = {\r\n                view: result\r\n            };\r\n            done();\r\n        });\r\n    });\r\n}\r\n\r\nvar densityCanvas = document.getElementById(\"densityChart\");\r\n\r\nChart.defaults.global.defaultFontFamily = \"Lato\";\r\nChart.defaults.global.defaultFontSize = 18;\r\n\r\nvar densityData = {\r\n  label: 'Density of Planets (kg/m3)',\r\n  data: [5427, 5243, 5514, 3933, 1326, 687, 1271, 1638]\r\n};\r\n\r\nvar barChart = new Chart(densityCanvas, {\r\n  type: 'bar',\r\n  data: {\r\n    labels: [\"Mercury\", \"Venus\", \"Earth\", \"Mars\", \"Jupiter\", \"Saturn\", \"Uranus\", \"Neptune\"],\r\n    datasets: [densityData]\r\n  }\r\n});\r\n"},"property":"content","logged":true,"previousOperationId":"zy05yvpzwbvhmtg","id":"0o72br5iwkewgek","stack":"ReferenceError: document is not defined\n    at sandbox.js:26:21\n    at sandbox.js:43:43\n    at Script.runInContext (node:vm:139:12)\n    at VM.run (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\vm2\\lib\\main.js:933:53)\n    at run (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\safeSandbox.js:194:33)\n    at WorkerReporter._runInSandbox (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:140:12)\n    at WorkerReporter.runInSandbox (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:151:17)\n    at async executeScript (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\executeScript.js:123:12)\n    at async Scripts._runScript (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:140:30)\n    at async Scripts.handleBeforeRender (E:\\Ibraime\\3DVista-Nodejs\\3dVista-Nodejs\\backend\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:64:7)","message":"Error when evaluating custom script /Views/view-script\ndocument is not defined\n\n(sandbox.js line 26:21)\n\n  24 | }\n  25 |\n> 26 | var densityCanvas = document.getElementById(\"densityChart\");\n     |                     ^\n  27 |\n  28 | Chart.defaults.global.defaultFontFamily = \"Lato\";\n  29 | Chart.defaults.global.defaultFontSize = 18;\n\n(sandbox.js line 43:43)\n\n  41 |   }\n  42 | });\n> 43 |\n     | ^\n\n"}
