<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="http://localhost:4000/loginForm/style.css">
</head>

<body>
  <div style="left:100px;">
    <h2 style="text-align: center;">Contact</h2>

    <p style="display:inline-block;">Message: &nbsp;</p></br>
    <textarea id="message" rows="4" cols="25" style="resize: none;" spellcheck="false" maxlength="250"></textarea></br></br></br>
    <div style="text-align: center;">
      <button class="testbutton" type="button" onclick="send()">Send</button>
      <button class="testbutton2" type="button" onclick="goBack()">Back</button>
      <p id="demo" style="background-color: rgb(61, 0, 0); color: white;"></p>
    </div>
  </div>


  <script>
    function send() {
      let message = document.getElementById("message").value;
      let text;
      if (message != "") {
        var userData=localStorage.getItem("lastname");
        var user = JSON.parse(userData);
        var datos = JSON.stringify({ "content": message, "mail": user.user.mail });
        var request = new XMLHttpRequest();
        request.open("POST", "http://localhost:4000/api/texts", true);
        request.setRequestHeader('Content-Type', 'application/json');
        request.send(datos);

        document.getElementById("demo").innerHTML = "Correctly sent";
      } else {
        text = "You didn't write"
        document.getElementById("demo").innerHTML = text;
        document.getElementById("message").value="";
      }
    }
    function goBack() {
      window.location.href = "http://localhost:4000/logout/";
    }
  </script>

</body>

</html>